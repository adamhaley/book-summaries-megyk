@import '@mantine/core/styles.css';
@import '@mantine/notifications/styles.css';
@import '@mantine/dates/styles.css';
@import '@mantine/dropzone/styles.css';
@import '@mantine/tiptap/styles.css';
@import '@mantine/charts/styles.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Prevent extra scroll space and horizontal scrolling */
html, body {
  height: 100%;
  margin: 0;
  padding: 0;
  overflow-x: hidden; /* Prevent horizontal page scrolling globally */
}

/* Only prevent body scroll when AppShell is present (dashboard pages) */
body:has(.mantine-AppShell-root) {
  overflow: hidden;
}

/* Dark mode true black background - High Contrast */
[data-mantine-color-scheme='dark'] {
  --mantine-color-body: #000000;
  --mantine-color-default: #000000;
  --mantine-color-dark-9: #000000;
  --mantine-color-dark-8: #000000;
  --mantine-color-dark-7: #000000;
  --mantine-color-dark-6: #2a2a2a;
  --mantine-color-dark-5: #3a3a3a;
  --mantine-color-dark-4: #4a4a4a;
  
  /* High contrast text */
  --mantine-color-text: #FFFFFF;
  --mantine-color-dimmed: #AAAAAA;
  
  /* Card backgrounds - pure black */
  --mantine-color-default-bg: #000000;
  --mantine-color-default-border: #2a2a2a;
}

/* Force AppShell backgrounds to true black */
[data-mantine-color-scheme='dark'] .mantine-AppShell-root,
[data-mantine-color-scheme='dark'] .mantine-AppShell-main,
[data-mantine-color-scheme='dark'] .mantine-AppShell-header,
[data-mantine-color-scheme='dark'] .mantine-AppShell-navbar {
  background-color: #000000;
}

/* High contrast cards and surfaces */
[data-mantine-color-scheme='dark'] .mantine-Card-root {
  background-color: #000000;
  border-color: #2a2a2a;
}

/* Pure white text for high contrast */
[data-mantine-color-scheme='dark'] .mantine-Title-root,
[data-mantine-color-scheme='dark'] h1,
[data-mantine-color-scheme='dark'] h2,
[data-mantine-color-scheme='dark'] h3 {
  color: #FFFFFF;
}

/* Buttons - vibrant on black */
[data-mantine-color-scheme='dark'] .mantine-Button-root[data-variant='filled'] {
  box-shadow: 0 4px 12px rgba(0, 210, 255, 0.3);
}

[data-mantine-color-scheme='dark'] .mantine-Button-root[data-variant='filled']:hover {
  box-shadow: 0 6px 20px rgba(0, 210, 255, 0.4);
  transform: translateY(-1px);
}

/* Badges - higher contrast */
[data-mantine-color-scheme='dark'] .mantine-Badge-root {
  border: 1px solid rgba(255, 255, 255, 0.15);
}

/* Tables - subtle borders for high contrast theme */
[data-mantine-color-scheme='dark'] .mantine-Table-table {
  border-color: #1a1a1a;
}

[data-mantine-color-scheme='dark'] .mantine-Table-tr {
  border-color: #1a1a1a;
}

[data-mantine-color-scheme='dark'] .mantine-Table-thead {
  border-color: #1a1a1a;
}

[data-mantine-color-scheme='dark'] .mantine-Table-th {
  border-color: #1a1a1a;
  color: #AAAAAA;
  font-weight: 600;
}

[data-mantine-color-scheme='dark'] .mantine-Table-td {
  border-color: #1a1a1a;
}

/* Fix AppShell height and prevent extra scroll space */
.mantine-AppShell-root {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  height: 100vh;
  height: 100dvh;
  overflow: hidden;
  z-index: 100;
}

/* Hide root layout's main/footer when AppShell is active */
body:has(.mantine-AppShell-root) > div > main,
body:has(.mantine-AppShell-root) > div > footer {
  display: none;
}

.mantine-AppShell-main {
  height: calc(100vh - 60px);
  height: calc(100dvh - 60px);
  overflow-y: scroll !important;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;
}

/* Mobile scrolling fixes */
.mantine-Modal-body {
  -webkit-overflow-scrolling: touch;
  overflow-y: auto !important;
}

/* Ensure scrollable areas have visible scrollbars on mobile */
@supports (-webkit-touch-callout: none) {
  /* iOS-specific styles */
  .mantine-Modal-body::-webkit-scrollbar {
    -webkit-appearance: none;
    width: 7px;
  }

  .mantine-Modal-body::-webkit-scrollbar-thumb {
    border-radius: 4px;
    background-color: rgba(0, 0, 0, 0.3);
  }

  [data-mantine-color-scheme='dark'] .mantine-Modal-body::-webkit-scrollbar-thumb {
    background-color: rgba(255, 255, 255, 0.3);
  }
}
